## XSSに対する脆弱性対策<br>

ユーザから入力された値を、何も処理することなく出力するようにしているためです<br>


### 【基本的対策】<br>
特別な意味を持つ文字列を別の文字に置き換えて処理する（エスケープ処理）<br>

・HTMLにおいて特殊な意味を持つ【＜】等を普通の文字として認識するように別の文字に置き換える<br>

<img width="653" height="120" alt="image" src="https://github.com/user-attachments/assets/69dc9205-8123-47cd-bf22-73312d9a9492" />

・予め用意されているエスケープ関数を利用する

### 【保険的対策】<br>
　　クッキーにhttponly属性を付与する<br>
　　X-XSS-Protectionヘッタを挿入し、XSS攻撃を無効にする<br>

今回は【基本的対策】の中の "予め用意されているエスケープ関数を利用する”　を紹介します！<br>

### エスケープ処理について<br>
 外部から送信されるパラメータをＷｅｂサイト上でそのまま表示せずエスケープ処理を行って出力することです<br>

<img width="1053" height="572" alt="image" src="https://github.com/user-attachments/assets/44b7f9f6-10f3-4123-b9b5-ab8dccc1079e" />

Webページの表示に影響のある特殊文字をHTMLエンティティに変換するものとしては以下の文字列があります<br>

<img width="927" height="403" alt="image" src="https://github.com/user-attachments/assets/fa7530df-1193-4fea-aff8-7fe144d81366" />

PHPによるエスケープ処理について<br>
  ”htmlspecialchars() 関数"によりエスケープ処理する<br>
  <img width="1045" height="405" alt="image" src="https://github.com/user-attachments/assets/06c40a2a-8ac7-4bd7-9b33-10d929747d43" />

  （参考）<br>
   https://www.php.net/manual/ja/function.htmlspecialchars.php<br>

htmlspecialchars() 関数が変換対象とする文字<br> 
<img width="1032" height="523" alt="image" src="https://github.com/user-attachments/assets/5af9b9fd-05ec-4c38-ba5c-17342fbc95af" />

以下のように修正したコードに変更します<br>
<img width="1026" height="535" alt="image" src="https://github.com/user-attachments/assets/dc4d0715-2198-45fc-89a6-0c45567de97d" />

【xss-new.php】呼び出し先を変更<br>
<img width="1001" height="569" alt="image" src="https://github.com/user-attachments/assets/bcf09a79-51c5-4c90-b301-fe6487303bfc" />

 【xss_conform-new.php】エスケープ処理されたフォーム<br>
 <img width="990" height="563" alt="image" src="https://github.com/user-attachments/assets/98486bba-3be7-43be-9e33-beefc5846b24" />

 エスケープ処理後の確認<br>
 <img width="1025" height="578" alt="image" src="https://github.com/user-attachments/assets/14cfada2-88cf-498f-ace8-fa8d3128f775" />

<img width="999" height="579" alt="image" src="https://github.com/user-attachments/assets/1e8529bd-9b18-4f48-9ea1-b97b78e55523" />

<img width="1007" height="572" alt="image" src="https://github.com/user-attachments/assets/f9924599-3857-4d73-b12c-c7688e2a7a30" />

<img width="1047" height="570" alt="image" src="https://github.com/user-attachments/assets/49767214-26bb-489a-8728-1f97653c64c4" />

　課題<br>
<img width="858" height="487" alt="image" src="https://github.com/user-attachments/assets/27a0f545-1246-473b-b6f0-6023d801ec5b" />


【対策】（保険的対策）<br>
















    

